{% extends "condidate_dashboard.html" %}
{% block start %}
{% load static %}

<style>
    .split-container {
        display: flex;
        padding: 40px 5%;
        height: calc(100vh - 80px);
        box-sizing: border-box;
        gap: 20px;
    }

    .left-panel,
    .right-panel {
        flex: 1;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        padding: 20px;
        overflow-y: auto;
    }

    .job-list-wrapper {
        display: flex;
        flex-direction: column;
        gap: 22px;
    }

    .job-card {
        background: #fff;
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 10px;
        padding: 25px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .job-card:hover,
    .job-card.active {
        background: #f0f7ff;
        border-color: #0077cc;
    }

    .job-title {
        font-size: 1.1rem;
        font-weight: 600;
        color: #003366;
        margin: 0;
    }

    .job-meta {
        font-size: 0.9rem;
        color: #555;
        margin-top: 6px;
    }

    .job-details h2 {
        margin-top: 0;
        color: #0077cc;
    }

    .job-details p {
        font-size: 0.95rem;
        line-height: 1.6;
        color: #444;
    }

    .btn-apply {
        display: inline-block;
        background: #0077cc;
        color: white;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 600;
        margin-top: 20px;
        text-decoration: none;
        transition: background 0.3s ease;
    }

    .btn-apply:hover {
        background: #005fa3;
    }

    .job-details-list {
        list-style-type: disc;
        padding-left: 20px;
        color: #444;
        font-size: 0.9rem;
        margin-top: 10px;
    }

    .job-details-list li {
        margin-bottom: 6px;
        color: #333;
        font-weight: 400;
    }
    .full-search-bar {
        width: 100%;
        background-color: #ffffff; /* Soft clean white */
        padding: 30px 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); /* Very light shadow for soft container feel */
    }
    
    .full-search-form {
        display: flex;
        max-width: 800px;
        margin: 0 auto;
        gap: 10px; /* This adds distance between input and button */
    }
    
    .full-search-input {
        flex: 1;
        padding: 15px 20px;
        border: 1px solid #ccc;
        border-radius: 50px; /* Full rounded */
        font-size: 16px;
        outline: none;
    }
    
    .full-search-btn {
        padding: 15px 25px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 50px; /* Fully rounded */
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    
    .full-search-btn:hover {
        background-color: #0056b3;
    }
    
</style>
<!-- Search Section -->
<div class="full-search-bar">
    <form method="get"  class="full-search-form">
        <input type="text" name="search" placeholder="Job title , keyword or company" class="full-search-input">
        <button type="submit" class="full-search-btn">Search</button>
    </form>
</div>

<div class="split-container">
    <!-- Left Panel - Job List -->
    <div class="left-panel">
        <div class="job-list-wrapper">
            {% for job_item in job %}
                <div class="job-card {% if forloop.first %}active{% endif %}" id="job-{{ job_item.id }}" onclick="showJobDetails({{ job_item.id }})">
                    <h3 class="job-title">{{ job_item.job_position }}</h3>
                    <p class="job-meta">{{ job_item.recruiter.company_name }} | {{ job_item.job_location }}</p>
                    <ul class="job-details-list">
                        <li><strong>Qualification:</strong> {{ job_item.qualifications }}</li>
                        <li><strong>Experience:</strong> {{ job_item.job_experience }}</li>
                        <li><strong>Salary:</strong> ₹{{ job_item.job_salary }}</li>
                        <li><strong>Status:</strong> {{ job_item.status }}</li>
                        <li><strong>Deadline:</strong> {{ job_item.deadline|date:"Y-m-d" }}</li>
                    </ul>
                </div>
            {% empty %}
                <p>No jobs available at the moment.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Right Panel - Job Details -->
    <div class="right-panel">
        <div id="job-details" class="job-details">
            {% with job.0 as first_job %}
                {% if first_job %}
                    <h2>{{ first_job.job_position }}</h2>
                    <p><strong>Location:</strong> {{ first_job.job_location }}</p>
                    <p><strong>Type:</strong> {{ first_job.job_type }}</p>
                    <p><strong>Salary:</strong> ₹{{ first_job.job_salary }}</p>
                    <p><strong>Experience:</strong> {{ first_job.job_experience }}</p>
                    <p><strong>Qualifications:</strong> {{ first_job.qualifications }}</p>
                    <p><strong>Status:</strong> {{ first_job.status }}</p>
                    <p><strong>Deadline:</strong> {{ first_job.deadline|date:"Y-m-d" }}</p>
                    
                    <hr>
                    <p>{{ first_job.job_description }}</p>
                    <a class="btn-apply" href="#">Apply Now</a>
                {% else %}
                    <p>No job selected.</p>
                {% endif %}
            {% endwith %}
        </div>
    </div>
</div>

<script>
    const jobs = {
        {% for job_item in job %}
            {{ job_item.id }}: {
                title: `{{ job_item.job_position|escapejs }}`,
                location: `{{ job_item.job_location|escapejs }}`,
                type: `{{ job_item.job_type|escapejs }}`,
                salary: `₹{{ job_item.job_salary }}`,
                experience: `{{ job_item.job_experience|escapejs }}`,
                qualifications: `{{ job_item.qualifications|escapejs }}`,
                description: `{{ job_item.job_description|linebreaksbr|escapejs }}`,
                status: `{{ job_item.status|escapejs }}`,
                deadline: `{{ job_item.deadline|date:"Y-m-d" }}`
            },
        {% endfor %}
    };

    function showJobDetails(id) {
        document.querySelectorAll('.job-card').forEach(el => el.classList.remove('active'));
        document.getElementById('job-' + id).classList.add('active');

        const job = jobs[id];
        const detailDiv = document.getElementById('job-details');
        detailDiv.innerHTML = `
            <h2>${job.title}</h2>
            <p><strong>Location:</strong> ${job.location}</p>
            <p><strong>Type:</strong> ${job.type}</p>
            <p><strong>Salary:</strong> ${job.salary}</p>
            <p><strong>Experience:</strong> ${job.experience}</p>
            <p><strong>Qualifications:</strong> ${job.qualifications}</p>
            <p><strong>Status:</strong> ${job.status}</p>
            <p><strong>Deadline:</strong> ${job.deadline}</p>
            
            <hr>
            <p>${job.description}</p>
            <a class="btn-apply" href="#">Apply Now</a>
        `;
    }
</script>

{% endblock %}
